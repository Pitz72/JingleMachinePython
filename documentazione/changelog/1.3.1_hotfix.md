# v1.3.1 Hotfix (2025-11-30)

## ğŸ› Bug Fixes
- **Critical Crash Fix (React Error #310):** Resolved a production crash caused by a "Rules of Hooks" violation in `App.tsx`.
    - The `handleFileDrop` hook was previously defined after a conditional return, causing React to throw "Rendered more hooks than during the previous render" when switching from the Welcome screen to the Main app.
    - Moved the hook definition to the top level of the component to ensure stability.
- **Database Stability:** Updated `db.ts` to use the local `idb` package instead of a remote `esm.sh` import, ensuring offline functionality and fixing test environment failures.

## ğŸ§ª Testing
- Added a comprehensive reproduction test case in `App.test.tsx` using Vitest and JSDOM.
- Verified that the application renders and handles interactions (button clicks) without crashing.
